<!--
  Generated template for the CardsPage page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header>

    <ion-navbar color="primary">
        <ion-buttons end>
          <button ion-button icon-only (click)="openMembersListPage()"><ion-icon name="people"></ion-icon></button>
        </ion-buttons>
        <ion-title>{{ title | titlecase }}</ion-title>
      </ion-navbar>

</ion-header>


<ion-content>
  <ion-segment [(ngModel)]="cards">
    <ion-segment-button value="todo">
      ToDo
    </ion-segment-button>
    <ion-segment-button value="doing">
      Doing
    </ion-segment-button>
    <ion-segment-button value="done">
      Done
    </ion-segment-button>
  </ion-segment>

  <div [ngSwitch]="cards">
    <ion-list *ngSwitchCase="'todo'">
      <p ion-text text-center *ngIf="!todo">You don't have any Todo Cards. <br> To Create one click on bottom right button.</p>
      <div *ngIf="todo">
          <ion-card *ngFor="let key of todokeys" color="{{todo[key].color}}">
            <ion-grid>
              <ion-row>
                <ion-col col-11 (click)="openCard(key, todo[key])">
                  <ion-card-header>
                    <h2>{{ todo[key].title }}</h2>
                  </ion-card-header>
                  <ion-card-content>
                    <p>{{ todo[key].description }}</p>
                  </ion-card-content>
                  <div class="short-desc">
                    <small *ngIf="todo[key].duedate"><ion-icon name="calendar"></ion-icon> {{ todo[key].duedate | date: 'MMM d, y' }}</small>
                    <small><ion-icon name="checkbox-outline"></ion-icon> {{ todo[key].completed_tasks }} / {{ todo[key].total_tasks }}</small>
                  </div>
                </ion-col>
                <ion-col col-1>
                  <button ion-button icon-only clear (click)="cardActions(key, todo[key])"><ion-icon name="more"></ion-icon></button>  
                </ion-col>
              </ion-row>
            </ion-grid>
        </ion-card>
      </div>
    </ion-list>

    <ion-list *ngSwitchCase="'doing'">
      <p ion-text text-center *ngIf="!doing">You don't have any Doing Cards.</p>
      <div *ngIf="doing">
        <ion-card *ngFor="let key of doingkeys" color="{{doing[key].color}}">
          <ion-grid>
            <ion-row>
              <ion-col col-11 (click)="openCard(key, doing[key])">
                <ion-card-header>
                  <h2>{{ doing[key].title }}</h2>
                </ion-card-header>
                <ion-card-content>
                  <p>{{ doing[key].description }}</p>
                </ion-card-content>
                <div class="short-desc">
                  <small *ngIf="doing[key].duedate"><ion-icon name="calendar"></ion-icon> {{ doing[key].duedate | date: 'MMM d, y' }}</small>
                  <small><ion-icon name="checkbox-outline"></ion-icon> {{ doing[key].completed_tasks }} / {{ doing[key].total_tasks }}</small>
                </div>
              </ion-col>
              <ion-col col-1>
                <button ion-button icon-only clear (click)="cardActions(key, doing[key])"><ion-icon name="more"></ion-icon></button>  
              </ion-col>
            </ion-row>
          </ion-grid>
      </ion-card>
      </div>
    </ion-list>

    <ion-list *ngSwitchCase="'done'">
      <p ion-text text-center *ngIf="!done">You don't have any Done Cards.</p>
      <div *ngIf="done">
        <ion-card *ngFor="let key of donekeys" color="{{done[key].color}}">
          <ion-grid>
            <ion-row>
              <ion-col col-11 (click)="openCard(key, done[key])">
                <ion-card-header>
                  <h2>{{ done[key].title }}</h2>
                </ion-card-header>
                <ion-card-content>
                  <p>{{ done[key].description }}</p>
                </ion-card-content>
                <div class="short-desc">
                  <small *ngIf="done[key].duedate"><ion-icon name="calendar"></ion-icon> {{ done[key].duedate | date: 'MMM d, y' }}</small>
                  <small><ion-icon name="checkbox-outline"></ion-icon> {{ done[key].completed_tasks }} / {{ done[key].total_tasks }}</small>
                </div>
              </ion-col>
              <ion-col col-1>
                <button ion-button icon-only clear (click)="cardActions(key, done[key])"><ion-icon name="more"></ion-icon></button>  
              </ion-col>
            </ion-row>
          </ion-grid>
      </ion-card>
      </div>
    </ion-list>
  </div>

  <ion-fab bottom right>
      <button ion-fab color="primary" navPush="AddCardPage" [navParams]="{boardKey: boardKey}"><ion-icon name="add"></ion-icon></button>
    </ion-fab>
</ion-content>
